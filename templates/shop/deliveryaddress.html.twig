{% extends 'base.html.twig' %}

{% block title %}Hello ShopController!{% endblock %}

{% block body %}


<div class="container">
    <h1>Adressangabe</h1>

    <!-- if user is logged in -->
    {% if app.user %}
        <p>Angemeldet als: <strong>{{ app.user.firstname }} {{ app.user.lastname }}</strong></p>


        {% if addresses is empty %}
            <p>Keine Adressen vorhanden, bitte eine neue Anlegen:</p>
            <a href="{{ path('app_address_create') }}">Neue Adresse anlegen</a>
        {% else %}
            {% for address in addresses %}
                <p>{{ address.street }} {{ address.number }}<br>
                    {{ address.zip }} {{ address.city }}<br>
                    {{ address.country }} {{address.country.iseu ? "(EU)" : "(nicht EU)"}}<br>
                    Phone: {{ address.telephone }}<br>
                    {{ address.email }}<br>            
                </p>
                 <a href="{{ path('app_address_edit', {'id': address.id}) }}">Adresse bearbeiten</a><br>
                 <a href="{{ path('app_address', {'id': address.id}) }}">Andere Adresse wählen</a>
            {% endfor %}
        {% endif %}

    {% else %}
        <div class="row">
        <div class="col-md-12">
            <h5>Sie sind nicht eingeloggt und haben 2 Möglichkeiten:</h5>
        </div>
        <div class="col-md-6">
            <p class="font-weight-bold">Einloggen/Registerieren:</p>
            <a href="{{ path('app_login') }}">Anmelden</a> oder
            <a href="{{ path('app_register') }}">Registrieren</a>
        </div>
        <div class="col-md-6">
            <p class="font-weight-bold">Als Gast bestellen:</p>
            
            {{ form_start(form) }}
            {{ form_widget(form) }}
            {{ form_end(form) }}

        </div>

        </div>
    {% endif %}



    <br>
    <br>
    <br>

    <h2>Shopping Cart</h2>
    <div class="app_shop_shoppingcart">
        {% include 'shop/editableShoppingCart.html.twig' %}
    </div>

</div>
{% endblock %}
